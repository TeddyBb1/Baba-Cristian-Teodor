<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OutsourceX — Login Admin</title>
  <link rel="stylesheet" href="admin-login.css" />
</head>

<!-- Buton „Înapoi sus” -->
<button id="backToTop" aria-label="Înapoi sus">↑</button>

<script>
  const btn = document.getElementById('backToTop');

  // afișează butonul după 300px scroll
  window.addEventListener('scroll', () => {
    if (document.documentElement.scrollTop > 300) {
      btn.classList.add('show');
    } else {
      btn.classList.remove('show');
    }
  });

  // scroll lin către top
  btn.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
</script>

<body>
  <main class="login-wrap">
    <div class="login-card">
      <div class="brand">
        <span class="logo-mark" aria-hidden="true"></span>
        <strong>OutsourceX Admin</strong>
      </div>
      <p class="muted">Autentificare necesară pentru a accesa panoul de administrare.</p>

      <form id="loginForm" class="login-form" novalidate>
        <label>Email
          <input type="email" name="email" required placeholder="admin@outsourcex.com" />
        </label>
        <label>Parolă
          <input type="password" name="pass" required placeholder="••••••••" />
        </label>
        <button class="btn btn-primary" type="submit">Autentificare</button>
        <p id="loginNote" class="note" role="status" aria-live="polite"></p>
      </form>

      <small class="muted">Demo fără backend — login-ul este simulat local.</small>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('loginForm');
      const note = document.getElementById('loginNote');

      // ❗ Forțăm re-autentificarea când vii pe pagina de login
      try { localStorage.removeItem('ox_admin'); } catch(e) {}

      form.addEventListener('submit', function (e) {
        e.preventDefault();

        // Blochează trimiterea dacă câmpurile sunt goale / invalide (HTML5)
        if (!form.reportValidity()) {
          note.textContent = 'Te rugăm să completezi câmpurile corect.';
          return;
        }

        const email = (form.email?.value || '').trim();
        const pass  = (form.pass?.value  || '').trim();

        if (!email || !pass) {
          note.textContent = 'Completează email și parolă.';
          return;
        }

        // „Login” local — marchează sesiunea ca autentificată
        try { localStorage.setItem('ox_admin','1'); } catch(e) {}

        // Redirecționează către dashboard
        window.location.href = "admin-dashboard.html";
      });
    });
  </script>
</body>
</html>
